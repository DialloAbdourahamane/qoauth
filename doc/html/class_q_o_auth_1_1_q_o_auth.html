<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>QOAuth: QOAuth::QOAuth Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_q_o_auth.html">QOAuth</a>::<a class="el" href="class_q_o_auth_1_1_q_o_auth.html">QOAuth</a>
  </div>
</div>
<div class="contents">
<h1>QOAuth::QOAuth Class Reference</h1><!-- doxytag: class="QOAuth::QOAuth" -->This class provides means for interaction with network services supporting OAuth authorization scheme.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="qoauth_8h-source.html">QtOAuth</a>&gt;</code>
<p>

<p>
<a href="class_q_o_auth_1_1_q_o_auth-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4f6b9bb7fbd1b93dfbeb6e5009ed410d"></a><!-- doxytag: member="QOAuth::QOAuth::QOAuth" ref="4f6b9bb7fbd1b93dfbeb6e5009ed410d" args="(QObject *parent=0)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d">QOAuth</a> (QObject *parent=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class instance with the given <em>parent</em>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="626321acc021c28b0900f85cc38ca29c"></a><!-- doxytag: member="QOAuth::QOAuth::~QOAuth" ref="626321acc021c28b0900f85cc38ca29c" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#626321acc021c28b0900f85cc38ca29c">~QOAuth</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> object. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken</a> (const QString &amp;requestUrl, <a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a> httpMethod, <a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a> signatureMethod=HMAC_SHA1, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params=<a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken</a> (const QString &amp;requestUrl, <a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a> httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, <a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a> signatureMethod=HMAC_SHA1, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params=<a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString</a> (const QString &amp;requestUrl, <a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a> httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, <a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a> signatureMethod, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params, <a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4">ParsingMode</a> mode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#ee37a1a4c7528be644d8d035dbc90279">inlineParameters</a> (const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params, <a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4">ParsingMode</a> mode=ParseForRequestContent)</td></tr>

<tr><td colspan="2"><br><h2>Properties</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the consumer key.  <a href="#92a869f4ae9db8b0dc6778cb13de6b05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the consumer secret.  <a href="#390566064096e166f65bb92f5c8026e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the timeout value in milliseconds for issued network requests.  <a href="#6085276e89e663ea6fed0501e563444d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the error code.  <a href="#27e2e9671c091d34901c1ee785f29593"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class is meant to enable OAuth support in applications in as simple way as possible. It provides 4 basic methods, two of which serve for authorization purposes: <ul>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, </li>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a>,</li>
</ul>
and the other two help with creation of requests for accessing Protected Resources: <ul>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a>, </li>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#ee37a1a4c7528be644d8d035dbc90279">inlineParameters()</a>.</li>
</ul>
<h2><a class="anchor" name="sec_auth_scheme">
OAuth authorization scheme</a></h2>
According to <a href="http://oauth.net/core/1.0/#consumer_req_param">OAuth 1.0 Core specification</a>, <em>the OAuth protocol enables websites or applications (Consumers) to access Protected Resources from a web service (Service Provider) via an API, without requiring Users to disclose their Service Provider credentials to the Consumers</em>. Simply, OAuth is a way of connecting an application to the Service Provider's API without needing to provide User's login or password. The authorization is based on an exchange of a Token (user-specific) together with a Consumer Key (application-specific), encrypted with a combination of so called Token Secret and Customer Secret. Getting access to Protected Resources consists in three basic steps: <ol>
<li>
obtaining an unauthorized Request Token from the Service Provider, </li>
<li>
asking the User to authorize the Request Token, </li>
<li>
exchanging the Request Token for the Access Token. </li>
</ol>
Details are covered in <a href="http://oauth.net/core/1.0/#anchor9">Section 6</a> of the OAuth 1.0 Core Specification. As the authorization procedure is quite complex, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library helps to simplify it by doing all the dirty work behind the scenes.<h2><a class="anchor" name="sec_req_token">
OAuth authorization with QOAuth</a></h2>
First step of OAuth authorization can be done in one line using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library. Consult the example:<p>
<div class="fragment"><pre class="fragment">QByteArray token;
QByteArray tokenSecret;

<a class="code" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d" title="Creates a new QOAuth class instance with the given parent.">QOAuth</a> qoauth = <span class="keyword">new</span> <a class="code" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d" title="Creates a new QOAuth class instance with the given parent.">QOAuth</a>;
<span class="comment">// set the consumer key and secret</span>
qoauth-&gt;setConsumerKey( <span class="stringliteral">"75b3d557c9268c49cfdf041a"</span> );
qoauth-&gt;setConsumerSecret( <span class="stringliteral">"fd12803fbf0760d34cd2ceb9955199ce"</span> );
<span class="comment">// set a timeout for requests (in msecs)</span>
qoauth-&gt;setRequestTimeout( 10000 );

<span class="comment">// send a request for an unauthorized token</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef for the data structure for storing request parameters.">QOAuth::ParamMap</a> reply =
    qoauth-&gt;requestToken( <span class="stringliteral">"http://example.com/request_token"</span>,
                          <a class="code" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb0993197c85f104ca7dd13458329f66207f6be4" title="Sets the HTTP method to GET.">QOAuth::GET</a>, <a class="code" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f74bc0d418aa61ebf3efc38282d6d22b0" title="Sets the signature method to HMAC-SHA1.">QOAuth::HMAC_SHA1</a> );

<span class="comment">// if no error occurred, read the received token and token secret</span>
<span class="keywordflow">if</span> ( qoauth-&gt;error() == <a class="code" href="namespace_q_o_auth.html#38fb8bcd101c339c7fd77b5de22df137cd78d96aa204e78fe3a3b3d9197b00e9" title="No error occured (so far :-) ).">QOAuth::NoError</a> ) {
  token = reply.value( QOAuth::ParamToken );
  tokenSecret = reply.value( QOAuth::ParamTokenSecret );
}

</pre></div><p>
Once the unauthorized Request Token is received, User has to authorize it using Service Provider-defined method. This is beyond the scope of this library. Once User authorizes the Request Token, it can be exchanged for an Access Token that authorizes the application to access User's Protected Resources. This can be done with another one line:<p>
<div class="fragment"><pre class="fragment"><span class="comment">// if necessary, create a map of additional arguments required by the Service Provider</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef for the data structure for storing request parameters.">QOAuth::ParamMap</a> otherArgs;
otherArgs.insert( <span class="stringliteral">"misc_arg1"</span>, <span class="stringliteral">"value1"</span> );
otherArgs.insert( <span class="stringliteral">"misc_arg2"</span>, <span class="stringliteral">"value2"</span> );

<span class="comment">// send a request to exchange Request Token for an Access Token</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef for the data structure for storing request parameters.">QOAuth::ParamMap</a> reply =
    qoauth-&gt;accessToken( <span class="stringliteral">"http://example.com/access_token"</span>, <a class="code" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319f8cfac32beb6ddefef094014cfa8d60b" title="Sets the HTTP method to POST.">QOAuth::POST</a>, token,
                         tokenSecret, <a class="code" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f74bc0d418aa61ebf3efc38282d6d22b0" title="Sets the signature method to HMAC-SHA1.">QOAuth::HMAC_SHA1</a>, otherArgs );

<span class="comment">// if no error occurred, read the Access Token (and other arguments, if applicable)</span>
<span class="keywordflow">if</span> ( qoauth-&gt;error() == <a class="code" href="namespace_q_o_auth.html#38fb8bcd101c339c7fd77b5de22df137cd78d96aa204e78fe3a3b3d9197b00e9" title="No error occured (so far :-) ).">QOAuth::NoError</a> ) {
  token = reply.value( <a class="code" href="namespace_q_o_auth.html#84c62aa0297aa05562462798f3d7e910" title="Returns the name of the Access Token argument parameter.">QOAuth::tokenParameterName</a>() );
  tokenSecret = reply.value( <a class="code" href="namespace_q_o_auth.html#e1a36aa1528f69b04e74d5d3e6364393" title="Returns the name of the Token Secret argument parameter.">QOAuth::tokenSecretParameterName</a>() );
  otherInfo = reply.value( <span class="stringliteral">"misc_arg3"</span> );
}
</pre></div><p>
Once the Access Token is received, the application is authorized.<h2><a class="anchor" name="sec_acc_res">
Requesting Protected Resources with QOAuth</a></h2>
In order to access Protected Resources, the application has to send a request containing arguments including Customer Key and Access Token, and encrypt them with Customer Secret and Token Secret. The process of constructing such a request can be reduced to another one-line call with <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a>:<p>
<div class="fragment"><pre class="fragment">QByteArray url( <span class="stringliteral">"http://example.com/get_photo"</span>);
<span class="comment">// create a request parameters map</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef for the data structure for storing request parameters.">QOAuth::ParamMap</a> map;
map.insert( <span class="stringliteral">"file"</span>, <span class="stringliteral">"flower_48.jpg"</span> );
map.insert( <span class="stringliteral">"size"</span>, <span class="stringliteral">"small"</span> );

<span class="comment">// construct the parameters string</span>
QByteArray content =
    qoauth-&gt;createParametersString( requestUrl, <a class="code" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb0993197c85f104ca7dd13458329f66207f6be4" title="Sets the HTTP method to GET.">QOAuth::GET</a>, <a class="code" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f74bc0d418aa61ebf3efc38282d6d22b0" title="Sets the signature method to HMAC-SHA1.">QOAuth::HMAC_SHA1</a>,
                                    token, tokenSecret, map,
                                    <a class="code" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4d5e9093e69391cce3735734f909cf759">QOAuth::ParseForInlineQuery</a> );
<span class="comment">// append parameters string to the URL</span>
url.append( content );
QNetworkRequest request( QUrl( url ) );
<span class="comment">// etc...</span>
</pre></div><h2><a class="anchor" name="sec_capabilities">
Capabilities</a></h2>
Out of 3 signature methods supported by OAuth protocol, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library supports only HMAC-SHA1 at the moment. This is subject to change in future releases. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c5015a5755fa96f800b3da6cbee3381c"></a><!-- doxytag: member="QOAuth::QOAuth::accessToken" ref="c5015a5755fa96f800b3da6cbee3381c" args="(const QString &amp;requestUrl, HttpMethod httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, SignatureMethod signatureMethod=HMAC_SHA1, const ParamMap &amp;params=ParamMap())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">QOAuth::ParamMap</a> QOAuth::QOAuth::accessToken           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>tokenSecret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em> = <code>HMAC_SHA1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em> = <code><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method constructs and sends a request for exchanging a Request Token (obtained previously with a call to <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>) for an Access Token, that authorizes the application to access Protected Resources. This is the third step of the OAuth authentication flow, according to <a href="http://oauth.net/core/1.0/#anchor9">OAuth 1.0 Core specification</a>. At the moment only HMAC-SHA1 signature method is supported. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em>, <em>httpMethod</em>, <em>token</em> and <em>tokenSecret</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> ParamMap.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
When the signature is created, the appropriate request is sent to the Service Provider (namely, the <em>requestUrl</em>). Depending on the type of the request, the parameters are passed according to the <a href="http://oauth.net/core/1.0/#consumer_req_param">Consumer Request Parametes</a> section of the OAuth specification, i.e.: <ul>
<li>for GET requests, in the HTTP Authorization header, as defined in <a href="http://oauth.net/core/1.0/#auth_header">OAuth HTTP Authorization Scheme</a>, </li>
<li>for POST requests, as a request body with <code>content-type</code> set to <code>application/x-www-form-urlencoded</code>.</li>
</ul>
Once the request is sent, a local event loop is executed and set up to wait for the request to complete. If the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a> property is set to a non-zero value, its vaue is applied as a request timeout, after which the request is aborted.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If request succeded, the method returns all the data passed in the Service Provider response (including an authorized Access Token and Token Secret), formed in a ParamMap. This request ends the authorization process, and the obtained Access Token and Token Secret should be kept by the application and provided with every future request authorized by OAuth, e.g. using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a>. If request fails, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> property is set to an appropriate value, and an empty ParamMap is returned.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593" title="This property holds the error code.">error</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="c0d944e6f6e6c2122c9dfb700a49af25"></a><!-- doxytag: member="QOAuth::QOAuth::createParametersString" ref="c0d944e6f6e6c2122c9dfb700a49af25" args="(const QString &amp;requestUrl, HttpMethod httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, SignatureMethod signatureMethod, const ParamMap &amp;params, ParsingMode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::createParametersString           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>tokenSecret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4">ParsingMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method generates a parameters string required to access Protected Resources using OAuth authorization. According to <a href="http://oauth.net/core/1.0/#anchor13">OAuth 1.0 Core specification</a>, every outgoing request for accessing Protected Resources must contain information like consumer key and Access Token, and has to be signed using one of the supported signature methods.<p>
At the moment only HMAC-SHA1 signature method is supported by the library. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em>, <em>httpMethod</em>, <em>token</em> and <em>tokenSecret</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
The <em>mode</em> parameter specifies the format of the parameter string.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The parsed parameters string, that depending on <em>mode</em> and <em>httpMethod</em> is:</dd></dl>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b><em>mode</em> </b>  </td><td><b><em>httpMode</em> </b>  </td><td><b>outcome</b>  </td></tr>
<tr>
<td rowspan="2"><code><a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4d5e9093e69391cce3735734f909cf759">QOAuth::ParseForInlineQuery</a></code></td><td><code><a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb0993197c85f104ca7dd13458329f66207f6be4" title="Sets the HTTP method to GET.">QOAuth::GET</a></code></td><td>prepended with a <em>'?'</em> and ready to be appended to the <em>requestUrl</em>  </td></tr>
<tr>
<td><em>others</em> </td><td>ready to be posted as a request body </td></tr>
<tr>
<td><code><a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def46c2747775846e2d5e7c96f7db6314d28" title="HTTP request header format (parameters to be put inside a request header).">QOAuth::ParseForHeaderArguments</a></code> </td><td>irrelevant </td><td>ready to be set as an argument for the <code>Authorization</code> HTTP header </td></tr>
<tr>
<td><code><a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4d12a3ed424be9e87704f138dc28804cf" title="Signature Base String format, meant for internal use.">QOAuth::ParseForSignatureBaseString</a></code> </td><td>irrelevant </td><td><em>meant for internal use</em> </td></tr>
</table>
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#ee37a1a4c7528be644d8d035dbc90279">inlineParameters()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="ee37a1a4c7528be644d8d035dbc90279"></a><!-- doxytag: member="QOAuth::QOAuth::inlineParameters" ref="ee37a1a4c7528be644d8d035dbc90279" args="(const ParamMap &amp;params, ParsingMode mode=ParseForRequestContent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::inlineParameters           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4">ParsingMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>ParseForRequestContent</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is provided for convenience. It generates an inline query string out of given parameter map. The resulting string can be either sent in an HTTP POST request as a request content, or appended directly to an HTTP GET request's URL as a query string. When using this method for preparing an HTTP GET query string you can set the <em>mode</em> to ParseForInlineQuery to have the string prepended with a question mark (separating the URL path from the query string). Modes other than <a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4d28f70298ea8c4c1bec8c9c27b0aeaf5" title="Inline query format (foo=bar&amp;bar=baz&amp;baz=foo ...), suitable for POST requests...">QOAuth::ParseForRequestContent</a> and <a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def4d5e9093e69391cce3735734f909cf759">QOAuth::ParseForInlineQuery</a> produce an empty byte array.<p>
Use this method together with <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a>, when you request a header parameters string (<a class="el" href="namespace_q_o_auth.html#442456118c9a45ac446554f17620def46c2747775846e2d5e7c96f7db6314d28" title="HTTP request header format (parameters to be put inside a request header).">QOAuth::ParseForHeaderArguments</a>) together with HTTP GET method. In such case, apart from header arguments, you must provide a query string containing custom request parameters (i.e. not OAuth-related). Pass the custom parameters map to this method to receive a query string to be appended to the URL.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1ea2dbdd7e2160b1f575cbe1027e4ed5"></a><!-- doxytag: member="QOAuth::QOAuth::requestToken" ref="1ea2dbdd7e2160b1f575cbe1027e4ed5" args="(const QString &amp;requestUrl, HttpMethod httpMethod, SignatureMethod signatureMethod=HMAC_SHA1, const ParamMap &amp;params=ParamMap())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">QOAuth::ParamMap</a> QOAuth::QOAuth::requestToken           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#a0e0bd4d8c1802873d3b3d2deb099319">HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_q_o_auth.html#4cc48c641aa9025d289d7d7e013f766f">SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em> = <code>HMAC_SHA1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em> = <code><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method constructs and sends a request for obtaining an unauthorized Request Token from the Service Provider. This is the first step of the OAuth authentication flow, according to <a href="http://oauth.net/core/1.0/#anchor9">OAuth 1.0 Core specification</a>. At the moment only HMAC-SHA1 signature method is supported. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em> and <em>httpMethod</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> ParamMap.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
When the signature is created, the appropriate request is sent to the Service Provider (namely, the <em>requestUrl</em>). Depending on the type of the request, the parameters are passed according to the <a href="http://oauth.net/core/1.0/#consumer_req_param">Consumer Request Parametes</a> section of the OAuth specification, i.e.: <ul>
<li>for GET requests, in the HTTP Authorization header, as defined in <a href="http://oauth.net/core/1.0/#auth_header">OAuth HTTP Authorization Scheme</a>, </li>
<li>for POST requests, as a request body with <code>content-type</code> set to <code>application/x-www-form-urlencoded</code>.</li>
</ul>
Once the request is sent, a local event loop is executed and set up to wait for the request to complete. If the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a> property is set to a non-zero value, its vaue is applied as a request timeout, after which the request is aborted.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If request succeded, the method returns all the data passed in the Service Provider response (including a Request Token and Token Secret), formed in a ParamMap. If request fails, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> property is set to an appropriate value, and an empty ParamMap is returned.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593" title="This property holds the error code.">error</a> </dd></dl>

</div>
</div><p>
<hr><h2>Property Documentation</h2>
<a class="anchor" name="92a869f4ae9db8b0dc6778cb13de6b05"></a><!-- doxytag: member="QOAuth::QOAuth::consumerKey" ref="92a869f4ae9db8b0dc6778cb13de6b05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::consumerKey<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The consumer key is used by the application to identify itself to the Service Provider<p>
Access functions: <ul>
<li><b>QByteArray consumerKey() const</b> </li>
<li><b>void setConsumerKey( const QByteArray &amp;consumerKey )</b> </li>
</ul>

</div>
</div><p>
<a class="anchor" name="390566064096e166f65bb92f5c8026e1"></a><!-- doxytag: member="QOAuth::QOAuth::consumerSecret" ref="390566064096e166f65bb92f5c8026e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::consumerSecret<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The consumerSecret is used by the application for signing outgoing requests<p>
Access functions: <ul>
<li><b>QByteArray consumerSecret() const</b> </li>
<li><b>void setConsumerSecret( const QByteArray &amp;consumerSecret )</b> </li>
</ul>

</div>
</div><p>
<a class="anchor" name="27e2e9671c091d34901c1ee785f29593"></a><!-- doxytag: member="QOAuth::QOAuth::error" ref="27e2e9671c091d34901c1ee785f29593" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int QOAuth::QOAuth::error<code> [read]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The error code is initially set to <a class="el" href="namespace_q_o_auth.html#38fb8bcd101c339c7fd77b5de22df137cd78d96aa204e78fe3a3b3d9197b00e9">NoError</a>, and its value is updated with every request, i.e. <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> or <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c0d944e6f6e6c2122c9dfb700a49af25">createParametersString()</a>.<p>
Access functions: <ul>
<li><b>int error() const</b></li>
</ul>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="namespace_q_o_auth.html#38fb8bcd101c339c7fd77b5de22df137" title="This enum type defines error types that are assigned to the QOAuth::QOAuth::error...">ErrorCode</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="6085276e89e663ea6fed0501e563444d"></a><!-- doxytag: member="QOAuth::QOAuth::requestTimeout" ref="6085276e89e663ea6fed0501e563444d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint QOAuth::QOAuth::requestTimeout<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class can send network requests when asked to do so by calling either <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a> or <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> method. By defining the <em>requestTimeout</em>, requests can have the time constraint applied, after which they fail, setting <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> to <a class="el" href="namespace_q_o_auth.html#38fb8bcd101c339c7fd77b5de22df1376ad252dcc734f5df5177cbadb7aa347b">Timeout</a>. The <em>requestTimeout</em> value is initially set to <code>0</code>, which in this case means that no timeout is applied to outgoing requests.<p>
Access functions: <ul>
<li><b>uint requestTimeout() const</b> </li>
<li><b>void setRequestTimeout( uint requestTimeout )</b> </li>
</ul>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="qoauth_8h-source.html">qoauth.h</a><li>src/qoauth.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 31 20:31:37 2009 for QOAuth by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
