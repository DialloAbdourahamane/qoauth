<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>QOAuth: QOAuth::QOAuth Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_q_o_auth.html">QOAuth</a>::<a class="el" href="class_q_o_auth_1_1_q_o_auth.html">QOAuth</a>
  </div>
</div>
<div class="contents">
<h1>QOAuth::QOAuth Class Reference</h1><!-- doxytag: class="QOAuth::QOAuth" -->This class provides means for interaction with network services supporting OAuth authorization scheme.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="qoauth_8h-source.html">QtOAuth</a>&gt;</code>
<p>

<p>
<a href="class_q_o_auth_1_1_q_o_auth-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">SignatureMethod</a> { <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f20533d5c2fc39abe1d6bd8ad8219d6cd7db">HMAC_SHA1</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205449bffb83feff106414a94cba21a1298">RSA_SHA1</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f20546f0a2aea63980298d42e2d2ebe2ef41">PLAINTEXT</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This enum type describes the signature method used by the request.  <a href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">HttpMethod</a> { <br>
&nbsp;&nbsp;<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a0caa3167ab01ccebe0f9c3796ae3137e">GET</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a0716663ca841e333bb454aa42a210f45">POST</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162ad9368449903c8726d7991878279b86c2">HEAD</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162aa043b32dc8344ec56edc8e3cb9bbd361">PUT</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a62e47e389dce94b49571de2bbc18f81c">DELETE</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This enum type specifies the HTTP method used for creating a <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> and/or sending a request.  <a href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632">ParsingMode</a> { <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632fe4c6cfd7d294f3fee27150bde63174d">ParseForInlineQuery</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632a6f2e579b14748926f82b529f861b675">ParseForHeaderArguments</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632393169b9ecb79beabc439408d14ddb55">ParseForSignatureBaseString</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This enum type specifies the method of parsing parameters into a parameter string.  <a href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a">ErrorCode</a> { <br>
&nbsp;&nbsp;<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7ae0935b1b6d11da1eb383645841519e74">NoError</a> =  200, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a0f38c6018c7e3e39c5fceaf78fdcf177">BadRequest</a> =  400, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7acf89922a6ffa800925f564845fe917da">Unauthorized</a> =  401, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a58b445d2d28ca5b7283559c6bd7c37d5">Forbidden</a> =  403, 
<br>
&nbsp;&nbsp;<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a68294c3d3e4537d14b40b1dea8b20a57">Timeout</a> =  1, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7ad460495caee712e0b9ace844f001e413">ConsumerKeyEmpty</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7ae9839ae1835093f6203e129889aa5fa0">ConsumerSecretEmpty</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a6a84d37831a0639760ad7f6d76be0d2a">UnsupportedSignatureMethod</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a82310b54b470cdaa45ae2ed62fc2fdf8">UnsupportedHttpMethod</a>, 
<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7afdf2d3f7fa6cd16552cb7ff9b66742c0">OtherError</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This enum type defines error types that are assigned to the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> property.  <a href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4f6b9bb7fbd1b93dfbeb6e5009ed410d"></a><!-- doxytag: member="QOAuth::QOAuth::QOAuth" ref="4f6b9bb7fbd1b93dfbeb6e5009ed410d" args="(QObject *parent=0)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d">QOAuth</a> (QObject *parent=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class instance with the given <em>parent</em>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="626321acc021c28b0900f85cc38ca29c"></a><!-- doxytag: member="QOAuth::QOAuth::~QOAuth" ref="626321acc021c28b0900f85cc38ca29c" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#626321acc021c28b0900f85cc38ca29c">~QOAuth</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> object. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken</a> (const QString &amp;requestUrl, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">HttpMethod</a> httpMethod, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">SignatureMethod</a> signatureMethod=HMAC_SHA1, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params=<a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken</a> (const QString &amp;requestUrl, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">HttpMethod</a> httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">SignatureMethod</a> signatureMethod=HMAC_SHA1, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params=<a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString</a> (const QString &amp;requestUrl, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">QOAuth::HttpMethod</a> httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">QOAuth::SignatureMethod</a> signatureMethod, const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632">QOAuth::ParsingMode</a> mode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1b31f302873090be3dbe574d72e6b13d">inlineParameters</a> (const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;params)</td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a50735f41dcc3920e5b1c412951b9f7c"></a><!-- doxytag: member="QOAuth::QOAuth::OAuthVersion" ref="a50735f41dcc3920e5b1c412951b9f7c" args="" -->
static const QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#a50735f41dcc3920e5b1c412951b9f7c">OAuthVersion</a> = &quot;1.0&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The supported OAuth scheme version. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c4c7d91be47baa12d2e99e5d84ae536b"></a><!-- doxytag: member="QOAuth::QOAuth::ParamToken" ref="c4c7d91be47baa12d2e99e5d84ae536b" args="" -->
static const QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c4c7d91be47baa12d2e99e5d84ae536b">ParamToken</a> = &quot;oauth_token&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <em>token</em> request parameter string. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dff5326568b13cdf7b5e9627e1591c84"></a><!-- doxytag: member="QOAuth::QOAuth::ParamTokenSecret" ref="dff5326568b13cdf7b5e9627e1591c84" args="" -->
static const QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#dff5326568b13cdf7b5e9627e1591c84">ParamTokenSecret</a> = &quot;oauth_token_secret&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The <em>token secret</em> request parameter string. <br></td></tr>
<tr><td colspan="2"><br><h2>Properties</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the consumer key.  <a href="#92a869f4ae9db8b0dc6778cb13de6b05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">QByteArray&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the consumer secret.  <a href="#390566064096e166f65bb92f5c8026e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the timeout value for issued network requests.  <a href="#6085276e89e663ea6fed0501e563444d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This property holds the error code.  <a href="#27e2e9671c091d34901c1ee785f29593"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class is meant to enable OAuth support in applications in as simple way as possible. It provides 4 basic methods, two of which serve for authorization purposes: <ul>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, </li>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a>,</li>
</ul>
and the other two help with creation of requests for accessing Protected Resources: <ul>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>, </li>
<li><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1b31f302873090be3dbe574d72e6b13d">inlineParameters()</a>.</li>
</ul>
<h2><a class="anchor" name="sec_auth_scheme">
OAuth authorization scheme</a></h2>
According to <a href="http://oauth.net/core/1.0/#consumer_req_param">OAuth 1.0 Core specification</a>, <em>the OAuth protocol enables websites or applications (Consumers) to access Protected Resources from a web service (Service Provider) via an API, without requiring Users to disclose their Service Provider credentials to the Consumers</em>. Simply, OAuth is a way of connecting an application to the Service Provider's API without needing to provide User's login or password. The authorization is based on an exchange of a Token (user-specific) together with a Consumer Key (application-specific), encrypted with a combination of so called Token Secret and Customer Secret. Getting access to Protected Resources consists in three basic steps: <ol>
<li>
obtaining an unauthorized Request Token from the Service Provider, </li>
<li>
asking the User to authorize the Request Token, </li>
<li>
exchanging the Request Token for an Access Token. </li>
</ol>
Details are covered in <a href="http://oauth.net/core/1.0/#anchor9">Section 6</a> of the OAuth 1.0 Core Specification. As the authorization procedure is quite complex, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library helps to simplify it by doing all the dirty work behind the scenes.<h2><a class="anchor" name="sec_req_token">
OAuth authorization with QOAuth</a></h2>
First step of OAuth authorization can be done in one line using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library. Consult the example:<p>
<div class="fragment"><pre class="fragment">QByteArray token;
QByteArray tokenSecret;

<a class="code" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d" title="Creates a new QOAuth class instance with the given parent.">QOAuth</a> qoauth = <span class="keyword">new</span> <a class="code" href="class_q_o_auth_1_1_q_o_auth.html#4f6b9bb7fbd1b93dfbeb6e5009ed410d" title="Creates a new QOAuth class instance with the given parent.">QOAuth</a>;
<span class="comment">// set the consumer key and secret</span>
qoauth-&gt;setConsumerKey( <span class="stringliteral">"75b3d557c9268c49cfdf041a"</span> );
qoauth-&gt;setConsumerSecret( <span class="stringliteral">"fd12803fbf0760d34cd2ceb9955199ce"</span> );
<span class="comment">// set a timeout for requests (in msecs)</span>
qoauth-&gt;setRequestTimeout( 10000 );

<span class="comment">// send a request for an unauthorized token</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef of a data structure to store request paramters.">QOAuth::ParamMap</a> reply =
    qoauth-&gt;requestToken( <span class="stringliteral">"http://example.com/request_token"</span>,
                          QOAuth::GET, QOAuth::HMAC_SHA1 );

<span class="comment">// if no error occurred, read the received token and token secret</span>
<span class="keywordflow">if</span> ( qoauth-&gt;error() == QOAuth::NoError ) {
  token = reply.value( QOAuth::ParamToken );
  tokenSecret = reply.value( QOAuth::ParamTokenSecret );
}

</pre></div><p>
After the unauthorized Request Token is received, User has to authorize it using Service Provider-defined method. This is beyond the scope of this library. Once User authorizes the Request Token, it can be exchanged for an Access Token that authorizes the application to access User's Protected Resources. This can be done with another one line:<p>
<div class="fragment"><pre class="fragment"><span class="comment">// if necessary, create a map of additional arguments required by the Service Provider</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef of a data structure to store request paramters.">QOAuth::ParamMap</a> otherArgs;
otherArgs.insert( <span class="stringliteral">"misc_arg1"</span>, <span class="stringliteral">"value1"</span> );
otherArgs.insert( <span class="stringliteral">"misc_arg2"</span>, <span class="stringliteral">"value2"</span> );

<span class="comment">// send a request to exchange Request Token for an Access Token</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef of a data structure to store request paramters.">QOAuth::ParamMap</a> reply =
    qoauth-&gt;accessToken( <span class="stringliteral">"http://example.com/access_token"</span>, QOAuth::POST, token,
                         tokenSecret, QOAuth::HMAC_SHA1, otherArgs );

<span class="comment">// if no error occurred, read the Access Token (and other arguments, if applicable)</span>
<span class="keywordflow">if</span> ( qoauth-&gt;error() == QOAuth::NoError ) {
  token = reply.value( QOAuth::ParamToken );
  tokenSecret = reply.value( QOAuth::ParamTokenSecret );
  otherInfo = reply.value( <span class="stringliteral">"misc_arg3"</span> );
}
</pre></div><p>
Once the Access Token is received, the application is authorized.<h2><a class="anchor" name="sec_acc_res">
Requesting Protected Resources with QOAuth</a></h2>
In order to access Protected Resources, the application has to send a request containing arguments including Customer Key and Access Token, and encrypt them with Customer Secret and Token Secret. The process of constructing such a request can be reduced to another one-line call with <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a>:<p>
<div class="fragment"><pre class="fragment">QByteArray url( <span class="stringliteral">"http://example.com/get_photo"</span>);
<span class="comment">// create a request parameters map</span>
<a class="code" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f" title="A typedef of a data structure to store request paramters.">QOAuth::ParamMap</a> map;
map.insert( <span class="stringliteral">"file"</span>, <span class="stringliteral">"flower_48.jpg"</span> );
map.insert( <span class="stringliteral">"size"</span>, <span class="stringliteral">"small"</span> );

<span class="comment">// construct the parameters string</span>
QByteArray content =
    qoauth-&gt;createParametersString( requestUrl, QOAuth::GET, QOAuth::HMAC_SHA1,
                                    token, tokenSecret, map,
                                    QOAuth::ParseForInlineQuery );
<span class="comment">// append parameters string to the URL</span>
url.append( content );
QNetworkRequest request( QUrl( url ) );
<span class="comment">// etc...</span>
</pre></div><h2><a class="anchor" name="sec_capabilities">
Capabilities</a></h2>
Out of 3 signature methods supported by OAuth protocol, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> library supports only HMAC-SHA1 at the moment. This is subject to change in future releases. <hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="80c25166f78533abe75184d98ef72f7a"></a><!-- doxytag: member="QOAuth::QOAuth::ErrorCode" ref="80c25166f78533abe75184d98ef72f7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a">QOAuth::QOAuth::ErrorCode</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This error codes collection contains both network-related errors and those that can occur when incorrect arguments are provided to any of the class's methods.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593" title="This property holds the error code.">error</a> </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7ae0935b1b6d11da1eb383645841519e74"></a><!-- doxytag: member="NoError" ref="80c25166f78533abe75184d98ef72f7ae0935b1b6d11da1eb383645841519e74" args="" -->NoError</em>&nbsp;</td><td>
No error occured (so far :-) ). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7a0f38c6018c7e3e39c5fceaf78fdcf177"></a><!-- doxytag: member="BadRequest" ref="80c25166f78533abe75184d98ef72f7a0f38c6018c7e3e39c5fceaf78fdcf177" args="" -->BadRequest</em>&nbsp;</td><td>
Represents HTTP status code <code>400</code> (Bad Request). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7acf89922a6ffa800925f564845fe917da"></a><!-- doxytag: member="Unauthorized" ref="80c25166f78533abe75184d98ef72f7acf89922a6ffa800925f564845fe917da" args="" -->Unauthorized</em>&nbsp;</td><td>
Represents HTTP status code <code>401</code> (Unauthorized). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7a58b445d2d28ca5b7283559c6bd7c37d5"></a><!-- doxytag: member="Forbidden" ref="80c25166f78533abe75184d98ef72f7a58b445d2d28ca5b7283559c6bd7c37d5" args="" -->Forbidden</em>&nbsp;</td><td>
Represents HTTP status code <code>403</code> (Forbidden). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7a68294c3d3e4537d14b40b1dea8b20a57"></a><!-- doxytag: member="Timeout" ref="80c25166f78533abe75184d98ef72f7a68294c3d3e4537d14b40b1dea8b20a57" args="" -->Timeout</em>&nbsp;</td><td>
Represents a request timeout error. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7ad460495caee712e0b9ace844f001e413"></a><!-- doxytag: member="ConsumerKeyEmpty" ref="80c25166f78533abe75184d98ef72f7ad460495caee712e0b9ace844f001e413" args="" -->ConsumerKeyEmpty</em>&nbsp;</td><td>
Consumer key has not been provided. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7ae9839ae1835093f6203e129889aa5fa0"></a><!-- doxytag: member="ConsumerSecretEmpty" ref="80c25166f78533abe75184d98ef72f7ae9839ae1835093f6203e129889aa5fa0" args="" -->ConsumerSecretEmpty</em>&nbsp;</td><td>
Consumer secret has not been provided. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7a6a84d37831a0639760ad7f6d76be0d2a"></a><!-- doxytag: member="UnsupportedSignatureMethod" ref="80c25166f78533abe75184d98ef72f7a6a84d37831a0639760ad7f6d76be0d2a" args="" -->UnsupportedSignatureMethod</em>&nbsp;</td><td>
The signature method is not supported by the library. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7a82310b54b470cdaa45ae2ed62fc2fdf8"></a><!-- doxytag: member="UnsupportedHttpMethod" ref="80c25166f78533abe75184d98ef72f7a82310b54b470cdaa45ae2ed62fc2fdf8" args="" -->UnsupportedHttpMethod</em>&nbsp;</td><td>
The HTTP method is not supported by the request. Note that <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> accept only HTTP GET and POST requests. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="80c25166f78533abe75184d98ef72f7afdf2d3f7fa6cd16552cb7ff9b66742c0"></a><!-- doxytag: member="OtherError" ref="80c25166f78533abe75184d98ef72f7afdf2d3f7fa6cd16552cb7ff9b66742c0" args="" -->OtherError</em>&nbsp;</td><td>
A network-related error not specified above. </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="6664e804a38c7cf80f4f6c176a05162a"></a><!-- doxytag: member="QOAuth::QOAuth::HttpMethod" ref="6664e804a38c7cf80f4f6c176a05162a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">QOAuth::QOAuth::HttpMethod</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The HTTP method has to be specified in <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class for two reasons: <ul>
<li>to know what type of request should be prepared and sent (<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a>), </li>
<li>to prepare a correct signature, as the Signature Base String contains a parameter specifying the HTTP method used for request (<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>).</li>
</ul>
<dl class="note" compact><dt><b>Note:</b></dt><dd>For <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> methods only <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a0caa3167ab01ccebe0f9c3796ae3137e">GET</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a0716663ca841e333bb454aa42a210f45">POST</a> methods are allowed. </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="6664e804a38c7cf80f4f6c176a05162a0caa3167ab01ccebe0f9c3796ae3137e"></a><!-- doxytag: member="GET" ref="6664e804a38c7cf80f4f6c176a05162a0caa3167ab01ccebe0f9c3796ae3137e" args="" -->GET</em>&nbsp;</td><td>
Sets the HTTP method to GET. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6664e804a38c7cf80f4f6c176a05162a0716663ca841e333bb454aa42a210f45"></a><!-- doxytag: member="POST" ref="6664e804a38c7cf80f4f6c176a05162a0716663ca841e333bb454aa42a210f45" args="" -->POST</em>&nbsp;</td><td>
Sets the HTTP method to POST. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6664e804a38c7cf80f4f6c176a05162ad9368449903c8726d7991878279b86c2"></a><!-- doxytag: member="HEAD" ref="6664e804a38c7cf80f4f6c176a05162ad9368449903c8726d7991878279b86c2" args="" -->HEAD</em>&nbsp;</td><td>
Sets the HTTP method to HEAD. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6664e804a38c7cf80f4f6c176a05162aa043b32dc8344ec56edc8e3cb9bbd361"></a><!-- doxytag: member="PUT" ref="6664e804a38c7cf80f4f6c176a05162aa043b32dc8344ec56edc8e3cb9bbd361" args="" -->PUT</em>&nbsp;</td><td>
Sets the HTTP method to PUT. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6664e804a38c7cf80f4f6c176a05162a62e47e389dce94b49571de2bbc18f81c"></a><!-- doxytag: member="DELETE" ref="6664e804a38c7cf80f4f6c176a05162a62e47e389dce94b49571de2bbc18f81c" args="" -->DELETE</em>&nbsp;</td><td>
Sets the HTTP method to DELETE. </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="1fc6c057bf47ff51f1121869884be632"></a><!-- doxytag: member="QOAuth::QOAuth::ParsingMode" ref="1fc6c057bf47ff51f1121869884be632" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632">QOAuth::QOAuth::ParsingMode</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
When creating a parameters string for a custom request using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a> the parsing mode must be defined in order to prepare the string correctly.<p>
According to what is stated in <a href="http://oauth.net/core/1.0/#consumer_req_param">OAuth 1.0 Core specification</a>, parameters can be passed in a request to the Service Provider in 3 different ways. When using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>, choose the one that suits you by setting <em>ParsingMode</em> appropriatelly.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a> </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="1fc6c057bf47ff51f1121869884be632fe4c6cfd7d294f3fee27150bde63174d"></a><!-- doxytag: member="ParseForInlineQuery" ref="1fc6c057bf47ff51f1121869884be632fe4c6cfd7d294f3fee27150bde63174d" args="" -->ParseForInlineQuery</em>&nbsp;</td><td>
Inlne query format (parameters appended to the request URL). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="1fc6c057bf47ff51f1121869884be632a6f2e579b14748926f82b529f861b675"></a><!-- doxytag: member="ParseForHeaderArguments" ref="1fc6c057bf47ff51f1121869884be632a6f2e579b14748926f82b529f861b675" args="" -->ParseForHeaderArguments</em>&nbsp;</td><td>
HTTP request header format (parameters to be put inside a request header). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="1fc6c057bf47ff51f1121869884be632393169b9ecb79beabc439408d14ddb55"></a><!-- doxytag: member="ParseForSignatureBaseString" ref="1fc6c057bf47ff51f1121869884be632393169b9ecb79beabc439408d14ddb55" args="" -->ParseForSignatureBaseString</em>&nbsp;</td><td>
<a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> format, meant for internal use. </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="11fecf5eb501ae1e2c14117be8a4f205"></a><!-- doxytag: member="QOAuth::QOAuth::SignatureMethod" ref="11fecf5eb501ae1e2c14117be8a4f205" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">QOAuth::QOAuth::SignatureMethod</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
There are 3 different signature methods defined by the <a href="http://oauth.net/core/1.0/#signing_process">OAuth protocol</a>. This enum is used to specify the method used by a specific request. Hence, one of its values must be passed as a parameter in any of the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> or <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a> method.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>The current implementation of the library supports only HMAC-SHA1 signature algorithm. </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="11fecf5eb501ae1e2c14117be8a4f20533d5c2fc39abe1d6bd8ad8219d6cd7db"></a><!-- doxytag: member="HMAC_SHA1" ref="11fecf5eb501ae1e2c14117be8a4f20533d5c2fc39abe1d6bd8ad8219d6cd7db" args="" -->HMAC_SHA1</em>&nbsp;</td><td>
Sets the signature method to HMAC-SHA1. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="11fecf5eb501ae1e2c14117be8a4f205449bffb83feff106414a94cba21a1298"></a><!-- doxytag: member="RSA_SHA1" ref="11fecf5eb501ae1e2c14117be8a4f205449bffb83feff106414a94cba21a1298" args="" -->RSA_SHA1</em>&nbsp;</td><td>
Sets the signature method to RSA-SHA1 (not implemented yet). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="11fecf5eb501ae1e2c14117be8a4f20546f0a2aea63980298d42e2d2ebe2ef41"></a><!-- doxytag: member="PLAINTEXT" ref="11fecf5eb501ae1e2c14117be8a4f20546f0a2aea63980298d42e2d2ebe2ef41" args="" -->PLAINTEXT</em>&nbsp;</td><td>
Sets the signature method to PLAINTEXT (not implemented yet). </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c5015a5755fa96f800b3da6cbee3381c"></a><!-- doxytag: member="QOAuth::QOAuth::accessToken" ref="c5015a5755fa96f800b3da6cbee3381c" args="(const QString &amp;requestUrl, HttpMethod httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, SignatureMethod signatureMethod=HMAC_SHA1, const ParamMap &amp;params=ParamMap())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">QOAuth::ParamMap</a> QOAuth::QOAuth::accessToken           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>tokenSecret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em> = <code>HMAC_SHA1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em> = <code><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method constructs and sends a request for exchanging a Request Token (obtained previously with a call to <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>) for an Access Token, that authorizes the application to access Protected Resources. This is the third step of the OAuth authentication flow, according to <a href="http://oauth.net/core/1.0/#anchor9">OAuth 1.0 Core specification</a>. At the moment only HMAC-SHA1 signature method is supported. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em>, <em>httpMethod</em>, <em>token</em> and <em>tokenSecret</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> ParamMap.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
When the signature is created, the appropriate request is sent to the Service Provider (namely, the <em>requestUrl</em>). Depending on the type of the request, the parameters are passed according to the <a href="http://oauth.net/core/1.0/#consumer_req_param">Consumer Request Parametes</a> section of the OAuth specification, i.e.: <ul>
<li>for GET requests, in the HTTP Authorization header, as defined in <a href="http://oauth.net/core/1.0/#auth_header">OAuth HTTP Authorization Scheme</a>, </li>
<li>for POST requests, as a request body with <code>content-type</code> set to <code>application/x-www-form-urlencoded</code>.</li>
</ul>
Once the request is sent, a local event loop is executed and set up to wait for the request to complete. If the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a> property is set to a non-zero value, its vaue is applied as a request timeout, after which the request is aborted.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If request succeded, the method returns all the data passed in the Service Provider response (including an authorized Access Token and Token Secret), formed in a ParamMap. This request ends the authorization process, and the obtained Access Token and Token Secret should be kept by the application and provided with every future request authorized by OAuth, e.g. using <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>. If request fails, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> property is set to an appropriate value, and an empty ParamMap is returned.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593" title="This property holds the error code.">error</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="513e31d90999aa38f087130f548c75c9"></a><!-- doxytag: member="QOAuth::QOAuth::createParametersString" ref="513e31d90999aa38f087130f548c75c9" args="(const QString &amp;requestUrl, QOAuth::HttpMethod httpMethod, const QByteArray &amp;token, const QByteArray &amp;tokenSecret, QOAuth::SignatureMethod signatureMethod, const ParamMap &amp;params, QOAuth::ParsingMode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::createParametersString           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">QOAuth::HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&nbsp;</td>
          <td class="paramname"> <em>tokenSecret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">QOAuth::SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632">QOAuth::ParsingMode</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method generates a parameters string required to access Protected Resources using OAuth authorization. According to <a href="http://oauth.net/core/1.0/#anchor13">OAuth 1.0 Core specification</a>, every outgoing request for accessing Protected Resources must contain information like consumer key and Access Token, and has to be signed using one of the supported signature methods.<p>
At the moment only HMAC-SHA1 signature method is supported by the library. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em>, <em>httpMethod</em>, <em>token</em> and <em>tokenSecret</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
The <em>mode</em> parameter specifies the format of the parameter string.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The parsed parameters string, that depending on <em>mode</em> and <em>httpMethod</em> is:</dd></dl>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b><em>mode</em> </b>  </td><td><b><em>httpMode</em> </b>  </td><td><b>outcome</b>  </td></tr>
<tr>
<td rowspan="2"><code><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632fe4c6cfd7d294f3fee27150bde63174d" title="Inlne query format (parameters appended to the request URL).">QOAuth::QOAuth::ParseForInlineQuery</a></code></td><td><code><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a0caa3167ab01ccebe0f9c3796ae3137e" title="Sets the HTTP method to GET.">QOAuth::QOAuth::GET</a></code></td><td>prepended with a <em>'?'</em> and ready to be appended to the <em>requestUrl</em>  </td></tr>
<tr>
<td><em>others</em> </td><td>ready to be posted as a request body </td></tr>
<tr>
<td><code><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632a6f2e579b14748926f82b529f861b675" title="HTTP request header format (parameters to be put inside a request header).">QOAuth::QOAuth::ParseForHeaderArguments</a></code> </td><td>irrelevant </td><td>ready to be set as an argument for the <code>Authorization</code> HTTP header </td></tr>
<tr>
<td><code><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632393169b9ecb79beabc439408d14ddb55" title="Signature Base String format, meant for internal use.">QOAuth::QOAuth::ParseForSignatureBaseString</a></code> </td><td>irrelevant </td><td><em>meant for internal use</em> </td></tr>
</table>
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1b31f302873090be3dbe574d72e6b13d">inlineParameters()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1b31f302873090be3dbe574d72e6b13d"></a><!-- doxytag: member="QOAuth::QOAuth::inlineParameters" ref="1b31f302873090be3dbe574d72e6b13d" args="(const ParamMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::inlineParameters           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is provided for convenience. It generates an inline query string out of given parameter map and prepends it with '?'. The resulting string can be appended directly to a request URL as a query string.<p>
Use this method together with <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>, when you request a header parameters string (<a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1fc6c057bf47ff51f1121869884be632a6f2e579b14748926f82b529f861b675" title="HTTP request header format (parameters to be put inside a request header).">QOAuth::QOAuth::ParseForHeaderArguments</a>) together with HTTP GET method. In such case, apart from header arguments, you must provide a query string containing custom request parameters (i.e. not OAuth-related). Pass the custom parameters map to this method to receive a query string to be appended to the URL.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1ea2dbdd7e2160b1f575cbe1027e4ed5"></a><!-- doxytag: member="QOAuth::QOAuth::requestToken" ref="1ea2dbdd7e2160b1f575cbe1027e4ed5" args="(const QString &amp;requestUrl, HttpMethod httpMethod, SignatureMethod signatureMethod=HMAC_SHA1, const ParamMap &amp;params=ParamMap())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">QOAuth::ParamMap</a> QOAuth::QOAuth::requestToken           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>requestUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6664e804a38c7cf80f4f6c176a05162a">HttpMethod</a>&nbsp;</td>
          <td class="paramname"> <em>httpMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#11fecf5eb501ae1e2c14117be8a4f205">SignatureMethod</a>&nbsp;</td>
          <td class="paramname"> <em>signatureMethod</em> = <code>HMAC_SHA1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em> = <code><a class="el" href="namespace_q_o_auth.html#4a001535b7fdb06cc9d34cad1af27d2f">ParamMap</a>()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method constructs and sends a request for obtaining an unauthorized Request Token from the Service Provider. This is the first step of the OAuth authentication flow, according to <a href="http://oauth.net/core/1.0/#anchor9">OAuth 1.0 Core specification</a>. At the moment only HMAC-SHA1 signature method is supported. The HMAC-SHA1 <a href="http://oauth.net/core/1.0/#anchor14">Signature Base String</a> is created using the given <em>requestUrl</em> and <em>httpMethod</em>. The optional request parameters specified by the Service Provider can be passed in the <em>params</em> ParamMap.<p>
The Signature Base String contains the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and uses <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> for encrypting the message, so it's necessary to provide them both before issuing this request. The method will check if both <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#92a869f4ae9db8b0dc6778cb13de6b05">consumerKey</a> and <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#390566064096e166f65bb92f5c8026e1">consumerSecret</a> are provided, and fail if any of them is missing.<p>
When the signature is created, the appropriate request is sent to the Service Provider (namely, the <em>requestUrl</em>). Depending on the type of the request, the parameters are passed according to the <a href="http://oauth.net/core/1.0/#consumer_req_param">Consumer Request Parametes</a> section of the OAuth specification, i.e.: <ul>
<li>for GET requests, in the HTTP Authorization header, as defined in <a href="http://oauth.net/core/1.0/#auth_header">OAuth HTTP Authorization Scheme</a>, </li>
<li>for POST requests, as a request body with <code>content-type</code> set to <code>application/x-www-form-urlencoded</code>.</li>
</ul>
Once the request is sent, a local event loop is executed and set up to wait for the request to complete. If the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#6085276e89e663ea6fed0501e563444d">requestTimeout</a> property is set to a non-zero value, its vaue is applied as a request timeout, after which the request is aborted.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If request succeded, the method returns all the data passed in the Service Provider response (including a Request Token and Token Secret), formed in a ParamMap. If request fails, the <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> property is set to an appropriate value, and an empty ParamMap is returned.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593" title="This property holds the error code.">error</a> </dd></dl>

</div>
</div><p>
<hr><h2>Property Documentation</h2>
<a class="anchor" name="92a869f4ae9db8b0dc6778cb13de6b05"></a><!-- doxytag: member="QOAuth::QOAuth::consumerKey" ref="92a869f4ae9db8b0dc6778cb13de6b05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::consumerKey<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The consumer key is used by the application to identify itself to the Service Provider<p>
Access functions: <ul>
<li><b>QByteArray consumerKey() const</b> </li>
<li><b>void setConsumerKey( const QByteArray &amp;consumerKey )</b> </li>
</ul>

</div>
</div><p>
<a class="anchor" name="390566064096e166f65bb92f5c8026e1"></a><!-- doxytag: member="QOAuth::QOAuth::consumerSecret" ref="390566064096e166f65bb92f5c8026e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray QOAuth::QOAuth::consumerSecret<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The consumerSecret is used by the application for signing outgoing requests<p>
Access functions: <ul>
<li><b>QByteArray consumerSecret() const</b> </li>
<li><b>void setConsumerSecret( const QByteArray &amp;consumerSecret )</b> </li>
</ul>

</div>
</div><p>
<a class="anchor" name="27e2e9671c091d34901c1ee785f29593"></a><!-- doxytag: member="QOAuth::QOAuth::error" ref="27e2e9671c091d34901c1ee785f29593" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int QOAuth::QOAuth::error<code> [read]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The error code is initially set to <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7ae0935b1b6d11da1eb383645841519e74">NoError</a>, and its value is updated with every request, i.e. <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a>, <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> or <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#513e31d90999aa38f087130f548c75c9">createParametersString()</a>.<p>
Access functions: <ul>
<li><b>int error() const</b></li>
</ul>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a" title="This enum type defines error types that are assigned to the error property.">ErrorCode</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="6085276e89e663ea6fed0501e563444d"></a><!-- doxytag: member="QOAuth::QOAuth::requestTimeout" ref="6085276e89e663ea6fed0501e563444d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint QOAuth::QOAuth::requestTimeout<code> [read, write]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The <a class="el" href="class_q_o_auth_1_1_q_o_auth.html" title="This class provides means for interaction with network services supporting OAuth...">QOAuth</a> class can send network requests when asked to do so by calling either <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#1ea2dbdd7e2160b1f575cbe1027e4ed5">requestToken()</a> or <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#c5015a5755fa96f800b3da6cbee3381c">accessToken()</a> method. By defining the <em>requestTimeout</em>, requests can have the time constraint applied, after which they fail, setting <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#27e2e9671c091d34901c1ee785f29593">error</a> to <a class="el" href="class_q_o_auth_1_1_q_o_auth.html#80c25166f78533abe75184d98ef72f7a68294c3d3e4537d14b40b1dea8b20a57">Timeout</a>. The <em>requestTimeout</em> value is initially set to <code>0</code>, which in this case means that no timeout is applied to outgoing requests.<p>
Access functions: <ul>
<li><b>uint requestTimeout() const</b> </li>
<li><b>void setRequestTimeout( uint requestTimeout )</b> </li>
</ul>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="qoauth_8h-source.html">qoauth.h</a><li>src/qoauth.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jul 31 16:45:52 2009 for QOAuth by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
